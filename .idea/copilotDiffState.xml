<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/cat/nilcm01/portam/utils/StorageManager.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/cat/nilcm01/portam/utils/StorageManager.kt" />
              <option name="originalContent" value="package cat.nilcm01.portam.utils&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;import androidx.security.crypto.EncryptedSharedPreferences&#10;import androidx.security.crypto.MasterKey&#10;import androidx.datastore.core.DataStore&#10;import androidx.datastore.preferences.core.Preferences&#10;import androidx.datastore.preferences.core.booleanPreferencesKey&#10;import androidx.datastore.preferences.core.edit&#10;import androidx.datastore.preferences.core.intPreferencesKey&#10;import androidx.datastore.preferences.core.longPreferencesKey&#10;import androidx.datastore.preferences.core.stringPreferencesKey&#10;import androidx.datastore.preferences.preferencesDataStore&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.first&#10;import kotlinx.coroutines.flow.map&#10;&#10;&#10;object StorageManager {&#10;&#10;    private const val SECURE_PREFS_NAME = &quot;portam_secure_preferences&quot;&#10;    private const val DATASTORE_NAME = &quot;portam_datastore&quot;&#10;&#10;    @Volatile&#10;    internal lateinit var appContext: Context&#10;&#10;    // Initialize StorageManager with context (call this once in Application.onCreate())&#10;    fun initialize(context: Context) {&#10;        if (!::appContext.isInitialized) {&#10;            appContext = context.applicationContext&#10;        }&#10;    }&#10;&#10;    // Encrypted SharedPreferences for sensitive data&#10;    private val securePrefs: SharedPreferences by lazy {&#10;        checkInitialized()&#10;        val masterKey = MasterKey.Builder(appContext)&#10;            .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)&#10;            .build()&#10;&#10;        EncryptedSharedPreferences.create(&#10;            appContext,&#10;            SECURE_PREFS_NAME,&#10;            masterKey,&#10;            EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,&#10;            EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM&#10;        )&#10;    }&#10;&#10;    // DataStore extension property&#10;    internal val Context.dataStore: DataStore&lt;Preferences&gt; by preferencesDataStore(&#10;        name = DATASTORE_NAME&#10;    )&#10;&#10;    private fun checkInitialized() {&#10;        if (!::appContext.isInitialized) {&#10;            throw IllegalStateException(&quot;StorageManager must be initialized with a Context before use. Call StorageManager.initialize(context) first.&quot;)&#10;        }&#10;    }&#10;&#10;&#10;    //// SECURE PREFERENCES (Sensitive data - encrypted)&#10;&#10;&#10;    // String&#10;    fun saveSecureString(key: String, value: String) {&#10;        checkInitialized()&#10;        securePrefs.edit().putString(key, value).apply()&#10;    }&#10;&#10;    fun getSecureString(key: String, defaultValue: String? = null): String? {&#10;        checkInitialized()&#10;        return securePrefs.getString(key, defaultValue)&#10;    }&#10;&#10;    // Bool&#10;&#10;    fun saveSecureBoolean(key: String, value: Boolean) {&#10;        checkInitialized()&#10;        securePrefs.edit().putBoolean(key, value).apply()&#10;    }&#10;&#10;    fun getSecureBoolean(key: String, defaultValue: Boolean = false): Boolean {&#10;        checkInitialized()&#10;        return securePrefs.getBoolean(key, defaultValue)&#10;    }&#10;&#10;    // Int&#10;&#10;    fun saveSecureInt(key: String, value: Int) {&#10;        checkInitialized()&#10;        securePrefs.edit().putInt(key, value).apply()&#10;    }&#10;&#10;    fun getSecureInt(key: String, defaultValue: Int = 0): Int {&#10;        checkInitialized()&#10;        return securePrefs.getInt(key, defaultValue)&#10;    }&#10;&#10;    // Long&#10;&#10;    fun saveSecureLong(key: String, value: Long) {&#10;        checkInitialized()&#10;        securePrefs.edit().putLong(key, value).apply()&#10;    }&#10;&#10;    fun getSecureLong(key: String, defaultValue: Long = 0L): Long {&#10;        checkInitialized()&#10;        return securePrefs.getLong(key, defaultValue)&#10;    }&#10;&#10;    // Float&#10;&#10;    fun saveSecureFloat(key: String, value: Float) {&#10;        checkInitialized()&#10;        securePrefs.edit().putFloat(key, value).apply()&#10;    }&#10;&#10;    fun getSecureFloat(key: String, defaultValue: Float = 0f): Float {&#10;        checkInitialized()&#10;        return securePrefs.getFloat(key, defaultValue)&#10;    }&#10;&#10;    // General&#10;&#10;    fun removeSecure(key: String) {&#10;        checkInitialized()&#10;        securePrefs.edit().remove(key).apply()&#10;    }&#10;&#10;    fun clearAllSecure() {&#10;        checkInitialized()&#10;        securePrefs.edit().clear().apply()&#10;    }&#10;&#10;    fun containsSecure(key: String): Boolean {&#10;        checkInitialized()&#10;        return securePrefs.contains(key)&#10;    }&#10;&#10;&#10;    //// DATASTORE (Modern Flow-based preferences)&#10;&#10;&#10;    // Save String to DataStore&#10;    suspend fun saveStringToDataStore(key: String, value: String) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[stringPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get String from DataStore as Flow&#10;    fun getStringFromDataStoreFlow(key: String, defaultValue: String = &quot;&quot;): Flow&lt;String&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[stringPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get String from DataStore synchronously&#10;    suspend fun getStringFromDataStore(key: String, defaultValue: String = &quot;&quot;): String {&#10;        return getStringFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Save Int to DataStore&#10;    suspend fun saveIntToDataStore(key: String, value: Int) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[intPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get Int from DataStore as Flow&#10;    fun getIntFromDataStoreFlow(key: String, defaultValue: Int = 0): Flow&lt;Int&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[intPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get Int from DataStore synchronously&#10;    suspend fun getIntFromDataStore(key: String, defaultValue: Int = 0): Int {&#10;        return getIntFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Save Boolean to DataStore&#10;    suspend fun saveBooleanToDataStore(key: String, value: Boolean) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[booleanPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get Boolean from DataStore as Flow&#10;    fun getBooleanFromDataStoreFlow(key: String, defaultValue: Boolean = false): Flow&lt;Boolean&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[booleanPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get Boolean from DataStore synchronously&#10;    suspend fun getBooleanFromDataStore(key: String, defaultValue: Boolean = false): Boolean {&#10;        return getBooleanFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Save Long to DataStore&#10;    suspend fun saveLongToDataStore(key: String, value: Long) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[longPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get Long from DataStore as Flow&#10;    fun getLongFromDataStoreFlow(key: String, defaultValue: Long = 0L): Flow&lt;Long&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[longPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get Long from DataStore synchronously&#10;    suspend fun getLongFromDataStore(key: String, defaultValue: Long = 0L): Long {&#10;        return getLongFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Remove a key from DataStore (suspend function)&#10;    suspend fun removeFromDataStore(key: String) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences.remove(stringPreferencesKey(key))&#10;            preferences.remove(intPreferencesKey(key))&#10;            preferences.remove(booleanPreferencesKey(key))&#10;            preferences.remove(longPreferencesKey(key))&#10;        }&#10;    }&#10;&#10;    // Clear all DataStore preferences (suspend function)&#10;    suspend fun clearDataStore() {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences.clear()&#10;        }&#10;    }&#10;&#10;&#10;    //// SPECIFIC METHODS&#10;&#10;    // Virtual NFC Card&#10;&#10;    fun setVirtualCardUid(uid: String) {&#10;        saveSecureString(StorageKeys.NFC_CARD_UID, uid)&#10;    }&#10;&#10;    fun getVirtualCardUid(): String? {&#10;        return getSecureString(StorageKeys.NFC_CARD_UID, null)&#10;    }&#10;&#10;    // Device ID&#10;&#10;    fun setDeviceId(deviceId: String) {&#10;        saveSecureString(StorageKeys.DEVICE_ID, deviceId)&#10;    }&#10;&#10;    fun getDeviceId(): String? {&#10;        return getSecureString(StorageKeys.DEVICE_ID, null)&#10;    }&#10;&#10;    // Authentication and User Session&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return getSecureBoolean(StorageKeys.IS_LOGGED_IN, false)&#10;    }&#10;&#10;    fun login(token: String, userId: Int, name: String, surname: String, email: String) {&#10;        saveSecureBoolean(StorageKeys.IS_LOGGED_IN, true)&#10;        saveSecureString(StorageKeys.AUTH_TOKEN, token)&#10;        saveSecureInt(StorageKeys.USER_ID, userId)&#10;        saveSecureString(StorageKeys.USER_NAME, name)&#10;        saveSecureString(StorageKeys.USER_SURNAME, surname)&#10;        saveSecureString(StorageKeys.USER_EMAIL, email)&#10;    }&#10;&#10;    fun getAuthToken(): String? {&#10;        return getSecureString(StorageKeys.AUTH_TOKEN, null)&#10;    }&#10;&#10;    fun getUserData(): Map&lt;String, Any?&gt; {&#10;        return mapOf(&#10;            &quot;userId&quot; to getSecureInt(StorageKeys.USER_ID, -1),&#10;            &quot;name&quot; to getSecureString(StorageKeys.USER_NAME, null),&#10;            &quot;surname&quot; to getSecureString(StorageKeys.USER_SURNAME, null),&#10;            &quot;email&quot; to getSecureString(StorageKeys.USER_EMAIL, null)&#10;        )&#10;    }&#10;&#10;    fun logout() {&#10;        clearAllSecure()&#10;    }&#10;&#10;&#10;    //// OTHER METHODS&#10;&#10;&#10;    suspend fun clearEverything() {&#10;        clearAllSecure()&#10;        clearDataStore()&#10;    }&#10;}&#10;&#10;object StorageKeys {&#10;    //// Regular preferences keys (non-sensitive)&#10;&#10;    const val LANGUAGE = &quot;app_language&quot;&#10;    const val NOTIFICATIONS_ENABLED = &quot;notifications_enabled&quot;&#10;    const val FIRST_LAUNCH = &quot;first_launch&quot;&#10;&#10;    //// Secure preferences keys (sensitive data)&#10;&#10;    // Login and User&#10;    const val IS_LOGGED_IN = &quot;is_logged_in&quot;&#10;    const val AUTH_TOKEN = &quot;auth_token&quot;&#10;    const val USER_ID = &quot;user_id&quot;&#10;    const val USER_NAME = &quot;user_name&quot;&#10;    const val USER_SURNAME = &quot;user_surname&quot;&#10;    const val USER_EMAIL = &quot;user_email&quot;&#10;&#10;    // Digital NFC suport&#10;    const val NFC_CARD_UID = &quot;nfc_card_uid&quot;&#10;    const val DEVICE_ID = &quot;device_id&quot;&#10;}" />
              <option name="updatedContent" value="package cat.nilcm01.portam.utils&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;import androidx.security.crypto.EncryptedSharedPreferences&#10;import androidx.security.crypto.MasterKey&#10;import androidx.datastore.core.DataStore&#10;import androidx.datastore.preferences.core.Preferences&#10;import androidx.datastore.preferences.core.booleanPreferencesKey&#10;import androidx.datastore.preferences.core.edit&#10;import androidx.datastore.preferences.core.intPreferencesKey&#10;import androidx.datastore.preferences.core.longPreferencesKey&#10;import androidx.datastore.preferences.core.stringPreferencesKey&#10;import androidx.datastore.preferences.preferencesDataStore&#10;import kotlinx.coroutines.flow.Flow&#10;import kotlinx.coroutines.flow.first&#10;import kotlinx.coroutines.flow.map&#10;&#10;&#10;object StorageManager {&#10;&#10;    private const val SECURE_PREFS_NAME = &quot;portam_secure_preferences&quot;&#10;    private const val DATASTORE_NAME = &quot;portam_datastore&quot;&#10;&#10;    @Volatile&#10;    internal lateinit var appContext: Context&#10;&#10;    // Initialize StorageManager with context (call this once in Application.onCreate())&#10;    fun initialize(context: Context) {&#10;        if (!::appContext.isInitialized) {&#10;            appContext = context.applicationContext&#10;        }&#10;    }&#10;&#10;    // Encrypted SharedPreferences for sensitive data&#10;    private val securePrefs: SharedPreferences by lazy {&#10;        checkInitialized()&#10;        val masterKey = MasterKey.Builder(appContext)&#10;            .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)&#10;            .build()&#10;&#10;        EncryptedSharedPreferences.create(&#10;            appContext,&#10;            SECURE_PREFS_NAME,&#10;            masterKey,&#10;            EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,&#10;            EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM&#10;        )&#10;    }&#10;&#10;    // DataStore extension property&#10;    internal val Context.dataStore: DataStore&lt;Preferences&gt; by preferencesDataStore(&#10;        name = DATASTORE_NAME&#10;    )&#10;&#10;    private fun checkInitialized() {&#10;        if (!::appContext.isInitialized) {&#10;            throw IllegalStateException(&quot;StorageManager must be initialized with a Context before use. Call StorageManager.initialize(context) first.&quot;)&#10;        }&#10;    }&#10;&#10;&#10;    //// SECURE PREFERENCES (Sensitive data - encrypted)&#10;&#10;&#10;    // String&#10;    fun saveSecureString(key: String, value: String) {&#10;        checkInitialized()&#10;        securePrefs.edit().putString(key, value).apply()&#10;    }&#10;&#10;    fun getSecureString(key: String, defaultValue: String? = null): String? {&#10;        checkInitialized()&#10;        return securePrefs.getString(key, defaultValue)&#10;    }&#10;&#10;    // Bool&#10;&#10;    fun saveSecureBoolean(key: String, value: Boolean) {&#10;        checkInitialized()&#10;        securePrefs.edit().putBoolean(key, value).apply()&#10;    }&#10;&#10;    fun getSecureBoolean(key: String, defaultValue: Boolean = false): Boolean {&#10;        checkInitialized()&#10;        return securePrefs.getBoolean(key, defaultValue)&#10;    }&#10;&#10;    // Int&#10;&#10;    fun saveSecureInt(key: String, value: Int) {&#10;        checkInitialized()&#10;        securePrefs.edit().putInt(key, value).apply()&#10;    }&#10;&#10;    fun getSecureInt(key: String, defaultValue: Int = 0): Int {&#10;        checkInitialized()&#10;        return securePrefs.getInt(key, defaultValue)&#10;    }&#10;&#10;    // Long&#10;&#10;    fun saveSecureLong(key: String, value: Long) {&#10;        checkInitialized()&#10;        securePrefs.edit().putLong(key, value).apply()&#10;    }&#10;&#10;    fun getSecureLong(key: String, defaultValue: Long = 0L): Long {&#10;        checkInitialized()&#10;        return securePrefs.getLong(key, defaultValue)&#10;    }&#10;&#10;    // Float&#10;&#10;    fun saveSecureFloat(key: String, value: Float) {&#10;        checkInitialized()&#10;        securePrefs.edit().putFloat(key, value).apply()&#10;    }&#10;&#10;    fun getSecureFloat(key: String, defaultValue: Float = 0f): Float {&#10;        checkInitialized()&#10;        return securePrefs.getFloat(key, defaultValue)&#10;    }&#10;&#10;    // General&#10;&#10;    fun removeSecure(key: String) {&#10;        checkInitialized()&#10;        securePrefs.edit().remove(key).apply()&#10;    }&#10;&#10;    fun clearAllSecure() {&#10;        checkInitialized()&#10;        securePrefs.edit().clear().apply()&#10;    }&#10;&#10;    fun containsSecure(key: String): Boolean {&#10;        checkInitialized()&#10;        return securePrefs.contains(key)&#10;    }&#10;&#10;&#10;    //// DATASTORE (Modern Flow-based preferences)&#10;&#10;&#10;    // Save String to DataStore&#10;    suspend fun saveStringToDataStore(key: String, value: String) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[stringPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get String from DataStore as Flow&#10;    fun getStringFromDataStoreFlow(key: String, defaultValue: String = &quot;&quot;): Flow&lt;String&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[stringPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get String from DataStore synchronously&#10;    suspend fun getStringFromDataStore(key: String, defaultValue: String = &quot;&quot;): String {&#10;        return getStringFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Save Int to DataStore&#10;    suspend fun saveIntToDataStore(key: String, value: Int) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[intPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get Int from DataStore as Flow&#10;    fun getIntFromDataStoreFlow(key: String, defaultValue: Int = 0): Flow&lt;Int&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[intPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get Int from DataStore synchronously&#10;    suspend fun getIntFromDataStore(key: String, defaultValue: Int = 0): Int {&#10;        return getIntFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Save Boolean to DataStore&#10;    suspend fun saveBooleanToDataStore(key: String, value: Boolean) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[booleanPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get Boolean from DataStore as Flow&#10;    fun getBooleanFromDataStoreFlow(key: String, defaultValue: Boolean = false): Flow&lt;Boolean&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[booleanPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get Boolean from DataStore synchronously&#10;    suspend fun getBooleanFromDataStore(key: String, defaultValue: Boolean = false): Boolean {&#10;        return getBooleanFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Save Long to DataStore&#10;    suspend fun saveLongToDataStore(key: String, value: Long) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences[longPreferencesKey(key)] = value&#10;        }&#10;    }&#10;&#10;    // Get Long from DataStore as Flow&#10;    fun getLongFromDataStoreFlow(key: String, defaultValue: Long = 0L): Flow&lt;Long&gt; {&#10;        checkInitialized()&#10;        return appContext.dataStore.data.map { preferences -&gt;&#10;            preferences[longPreferencesKey(key)] ?: defaultValue&#10;        }&#10;    }&#10;&#10;    // Get Long from DataStore synchronously&#10;    suspend fun getLongFromDataStore(key: String, defaultValue: Long = 0L): Long {&#10;        return getLongFromDataStoreFlow(key, defaultValue).first()&#10;    }&#10;&#10;    // Remove a key from DataStore (suspend function)&#10;    suspend fun removeFromDataStore(key: String) {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences.remove(stringPreferencesKey(key))&#10;            preferences.remove(intPreferencesKey(key))&#10;            preferences.remove(booleanPreferencesKey(key))&#10;            preferences.remove(longPreferencesKey(key))&#10;        }&#10;    }&#10;&#10;    // Clear all DataStore preferences (suspend function)&#10;    suspend fun clearDataStore() {&#10;        checkInitialized()&#10;        appContext.dataStore.edit { preferences -&gt;&#10;            preferences.clear()&#10;        }&#10;    }&#10;&#10;&#10;    //// SPECIFIC METHODS&#10;&#10;    // Virtual NFC Card&#10;&#10;    fun setVirtualCardUid(uid: String) {&#10;        saveSecureString(StorageKeys.NFC_CARD_UID, uid)&#10;    }&#10;&#10;    fun getVirtualCardUid(): String? {&#10;        return getSecureString(StorageKeys.NFC_CARD_UID, null)&#10;    }&#10;&#10;    // Device ID&#10;&#10;    fun setDeviceId(deviceId: String) {&#10;        saveSecureString(StorageKeys.DEVICE_ID, deviceId)&#10;    }&#10;&#10;    fun getDeviceId(): String? {&#10;        return getSecureString(StorageKeys.DEVICE_ID, null)&#10;    }&#10;&#10;    // Authentication and User Session&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return getSecureBoolean(StorageKeys.IS_LOGGED_IN, false)&#10;    }&#10;&#10;    fun login(token: String, userId: Int, name: String, surname: String, email: String) {&#10;        saveSecureBoolean(StorageKeys.IS_LOGGED_IN, true)&#10;        saveSecureString(StorageKeys.AUTH_TOKEN, token)&#10;        saveSecureInt(StorageKeys.USER_ID, userId)&#10;        saveSecureString(StorageKeys.USER_NAME, name)&#10;        saveSecureString(StorageKeys.USER_SURNAME, surname)&#10;        saveSecureString(StorageKeys.USER_EMAIL, email)&#10;    }&#10;&#10;    fun getAuthToken(): String? {&#10;        return getSecureString(StorageKeys.AUTH_TOKEN, null)&#10;    }&#10;&#10;    fun getUserData(): Map&lt;String, Any?&gt; {&#10;        return mapOf(&#10;            &quot;userId&quot; to getSecureInt(StorageKeys.USER_ID, -1),&#10;            &quot;name&quot; to getSecureString(StorageKeys.USER_NAME, null),&#10;            &quot;surname&quot; to getSecureString(StorageKeys.USER_SURNAME, null),&#10;            &quot;email&quot; to getSecureString(StorageKeys.USER_EMAIL, null)&#10;        )&#10;    }&#10;&#10;    fun logout() {&#10;        clearAllSecure()&#10;    }&#10;&#10;&#10;    //// OTHER METHODS&#10;&#10;&#10;    suspend fun clearEverything() {&#10;        clearAllSecure()&#10;        clearDataStore()&#10;    }&#10;}&#10;&#10;object StorageKeys {&#10;    //// Regular preferences keys (non-sensitive)&#10;&#10;    const val LANGUAGE = &quot;app_language&quot;&#10;    const val NOTIFICATIONS_ENABLED = &quot;notifications_enabled&quot;&#10;    const val FIRST_LAUNCH = &quot;first_launch&quot;&#10;&#10;    //// Secure preferences keys (sensitive data)&#10;&#10;    // Login and User&#10;    const val IS_LOGGED_IN = &quot;is_logged_in&quot;&#10;    const val AUTH_TOKEN = &quot;auth_token&quot;&#10;    const val USER_ID = &quot;user_id&quot;&#10;    const val USER_NAME = &quot;user_name&quot;&#10;    const val USER_SURNAME = &quot;user_surname&quot;&#10;    const val USER_EMAIL = &quot;user_email&quot;&#10;&#10;    // Digital NFC suport&#10;    const val NFC_CARD_UID = &quot;nfc_card_uid&quot;&#10;    const val DEVICE_ID = &quot;device_id&quot;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>